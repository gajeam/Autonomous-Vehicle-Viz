<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <script src="http://d3js.org/d3.v3.min.js"></script>
    </head>
    <body>
        <h1>Autonomous Vehicles</h1>
        <div id="svgCanvas"></div>

        <script type="text/javascript">
        // Build our SVG
        width = 500.0;
        height = 500.0;
        companyWidth = width / 6.0;
        companyHeight = height / 10.0;
        companyColor = "#32CD32";

        unit = "px"
        svg = d3.select("#svgCanvas")
                .append("svg")
                .attr("width", width  + unit)
                .attr("height", height + unit);
        // Add a rectangle so we can always see our canvas size
        svg.append("rect")
            .attr("width", "100%")
            .attr("height", "100%")
            .attr("fill", "#faebd7");

        companies = ['Waymo', 'Uber', 'Apple', 'Tesla']
        for (i = 0; i < companies.length; i++) {
            addCompanyBlock(companies[i]);
        }
        // svg.selectAll('g.company')
        // .attr("transform", function(d, i) {
        //   return centerTranslationForCompany(i)
        // });


        // uber.attr("transform", "translate(" + (width - companyWidth) / 2 + "," + (height-companyHeight)/2 + ")");
        companies.push("Glusha")
        addCompanyBlock("Glusha");
        svg.selectAll('g.company')
        .transition()
        .delay(3.0)
        .duration(3.0)
        .attr("transform", function(d, i) {
          return centerTranslationForCompany(i)
        });


        function addCompanyBlock(name) {
          g = svg.append("g")
              .attr("id", name)
              .attr("class", "company");
          g.append("rect")
              .attr("fill", companyColor)
              .attr("height", companyHeight + unit)
              .attr("width", companyWidth + unit);
          g.append("text")
              .attr("y", companyHeight/2 + unit)
              .attr("x", companyWidth/2 + unit)
              .style("text-anchor", "middle")
              .style("alignment-baseline", "middle")
              .text(name);

          return g;
        };


        function centerTranslationForCompany(i) {
            margin = (width - (width * (companies.length - 1))/companies.length - companyWidth) / 2; // Used to center
            x = (width * i)/companies.length + margin;
            y = height/5 -companyHeight/2; // Put it 1/5th of the way up
            return ("translate(" + x + "," + y + ")");
        }

        </script>
    </body>
</html>  